name: Generate Test Vectors
on:
  push:
    branches:
      - master
jobs:
  generate:
    name: Generate all test vectors, updating existing vectors IF they have changed.
    runs-on: ubuntu-latest
    steps:
      - name: Update Test Vectors
        uses: technote-space/create-pr-action@v2
        with:
          EXECUTE_COMMANDS: make upgen
          COMMIT_MESSAGE: 'chore: update test vectors'
          PR_BRANCH_PREFIX: 'chore/'
          PR_BRANCH_NAME: 'update-test-vectors-${PR_ID}'
          PR_TITLE: 'chore: update test vectors (${PR_BASE_REF})'
          PR_BODY: 'This PR updates the test vectors. The vectors were generated from ${PR_BASE_REF}.'
